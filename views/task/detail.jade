extends ../layout

block append scripts

block content
	div.taskDetail
		if errorMessage
			h1.error!= errorMessage
		else
			h1 Task #{data.id} (#{data.type}): #{data.title}
			if code
				a.action(href="/task/#{data.id}/run/home.html") Run code
			if data.schema
				h2 Schema
				table
					each column in data.schema
						tr
							td= column.id
							td= column.name
							td= column.type
			pre!= JSON.stringify(data.configurations)
			hr
			span!= data.question
			hr
			if data.objects
				h3 Data
				table
					thead
						tr
							each val, fieldName in data.objects.field
								th= fieldName
					tbody
						each objectId, index in data.objects.id
							tr(data-object-id="#{objectId}")
								each val, fieldName in data.objects.field
									td= data.objects.field[ fieldName ][ index ]